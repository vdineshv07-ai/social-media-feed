// Source code is decompiled from a .class file using FernFlower decompiler (from Intellij IDEA).
package frontend;

import backend.Post;
import backend.PostService;
import java.util.Iterator;
import java.util.List;
import javafx.application.Application;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.Alert;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.ScrollPane;
import javafx.scene.control.TextArea;
import javafx.scene.control.TextField;
import javafx.scene.control.Alert.AlertType;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;

public class SocialMediaApp extends Application {
   private TextField searchField;
   private TextField titleField;
   private TextField authorField;
   private TextArea contentArea;
   private VBox postsContainer;
   private ScrollPane scrollPane;

   public SocialMediaApp() {
   }

   public void start(Stage primaryStage) {
      primaryStage.setTitle("Social Media Feed Viewer");
      VBox root = new VBox(15.0);
      root.setPadding(new Insets(20.0));
      root.setStyle("-fx-background-color: #f5f5f5;");
      Label headerLabel = new Label("Social Media Feed Viewer");
      headerLabel.setStyle("-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #333;");
      VBox searchSection = this.createSearchSection();
      VBox createSection = this.createPostSection();
      VBox displaySection = this.createDisplaySection();
      root.getChildren().addAll(new Node[]{headerLabel, searchSection, createSection, displaySection});
      Scene scene = new Scene(root, 800.0, 700.0);
      primaryStage.setScene(scene);
      primaryStage.show();
      this.loadPosts();
   }

   private VBox createSearchSection() {
      VBox section = new VBox(10.0);
      section.setStyle("-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 10;");
      Label searchLabel = new Label("Search Posts");
      searchLabel.setStyle("-fx-font-size: 16px; -fx-font-weight: bold;");
      HBox searchBox = new HBox(10.0);
      searchBox.setAlignment(Pos.CENTER_LEFT);
      this.searchField = new TextField();
      this.searchField.setPromptText("Search by title, content, or author...");
      this.searchField.setPrefWidth(300.0);
      Button searchBtn = new Button("Search");
      searchBtn.setStyle("-fx-background-color: #17a2b8; -fx-text-fill: white;");
      searchBtn.setOnAction((e) -> {
         this.searchPosts();
      });
      Button showAllBtn = new Button("Show All");
      showAllBtn.setStyle("-fx-background-color: #6c757d; -fx-text-fill: white;");
      showAllBtn.setOnAction((e) -> {
         this.loadPosts();
      });
      searchBox.getChildren().addAll(new Node[]{this.searchField, searchBtn, showAllBtn});
      section.getChildren().addAll(new Node[]{searchLabel, searchBox});
      return section;
   }

   private VBox createPostSection() {
      VBox section = new VBox(10.0);
      section.setStyle("-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 10;");
      Label createLabel = new Label("Create New Post");
      createLabel.setStyle("-fx-font-size: 16px; -fx-font-weight: bold;");
      this.titleField = new TextField();
      this.titleField.setPromptText("Post title...");
      this.titleField.setPrefWidth(400.0);
      this.authorField = new TextField();
      this.authorField.setPromptText("Your name...");
      this.authorField.setPrefWidth(200.0);
      this.contentArea = new TextArea();
      this.contentArea.setPromptText("What's on your mind?");
      this.contentArea.setPrefRowCount(3);
      this.contentArea.setPrefWidth(400.0);
      Button createBtn = new Button("Create Post");
      createBtn.setStyle("-fx-background-color: #28a745; -fx-text-fill: white; -fx-font-size: 14px;");
      createBtn.setOnAction((e) -> {
         this.createPost();
      });
      section.getChildren().addAll(new Node[]{createLabel, this.titleField, this.authorField, this.contentArea, createBtn});
      return section;
   }

   private VBox createDisplaySection() {
      VBox section = new VBox(10.0);
      Label postsLabel = new Label("Posts Feed");
      postsLabel.setStyle("-fx-font-size: 16px; -fx-font-weight: bold;");
      this.postsContainer = new VBox(10.0);
      this.postsContainer.setPadding(new Insets(10.0));
      this.scrollPane = new ScrollPane(this.postsContainer);
      this.scrollPane.setFitToWidth(true);
      this.scrollPane.setPrefHeight(300.0);
      this.scrollPane.setStyle("-fx-background-color: white;");
      section.getChildren().addAll(new Node[]{postsLabel, this.scrollPane});
      return section;
   }

   private void createPost() {
      String title = this.titleField.getText().trim();
      String author = this.authorField.getText().trim();
      String content = this.contentArea.getText().trim();
      if (!title.isEmpty() && !author.isEmpty()) {
         PostService.addPost(title, author, content);
         this.titleField.clear();
         this.authorField.clear();
         this.contentArea.clear();
         this.loadPosts();
      } else {
         this.showAlert("Error", "Title and Author are required!");
      }
   }

   private void searchPosts() {
      String query = this.searchField.getText().trim();
      List<Post> results = PostService.searchPosts(query);
      this.displayPosts(results);
   }

   private void loadPosts() {
      List<Post> posts = PostService.getAllPosts();
      this.displayPosts(posts);
   }

   private void displayPosts(List<Post> posts) {
      this.postsContainer.getChildren().clear();
      if (posts.isEmpty()) {
         Label noPostsLabel = new Label("No posts found. Create your first post!");
         noPostsLabel.setStyle("-fx-font-size: 14px; -fx-text-fill: #666;");
         this.postsContainer.getChildren().add(noPostsLabel);
      } else {
         Iterator var3 = posts.iterator();

         while(var3.hasNext()) {
            Post post = (Post)var3.next();
            VBox postCard = this.createPostCard(post);
            this.postsContainer.getChildren().add(postCard);
         }

      }
   }

   private VBox createPostCard(Post post) {
      VBox card = new VBox(8.0);
      card.setStyle("-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8; -fx-border-color: #ddd; -fx-border-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 3, 0, 0, 1);");
      card.setPrefWidth(750.0);
      Label titleLabel = new Label(post.getTitle());
      titleLabel.setStyle("-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #007bff;");
      titleLabel.setWrapText(true);
      HBox infoBox = new HBox(15.0);
      infoBox.setAlignment(Pos.CENTER_LEFT);
      Label authorLabel = new Label("By: " + post.getAuthor());
      authorLabel.setStyle("-fx-font-size: 12px; -fx-text-fill: #666;");
      Label likesLabel = new Label("Likes: " + post.getLikes());
      likesLabel.setStyle("-fx-font-size: 12px; -fx-text-fill: #666;");
      Button likeBtn = new Button("Like");
      likeBtn.setStyle("-fx-background-color: #28a745; -fx-text-fill: white; -fx-font-size: 12px;");
      likeBtn.setOnAction((e) -> {
         PostService.likePost(post.getId());
         this.loadPosts();
      });
      infoBox.getChildren().addAll(new Node[]{authorLabel, likesLabel, likeBtn});
      card.getChildren().addAll(new Node[]{titleLabel, infoBox});
      if (!post.getContent().isEmpty()) {
         Label contentLabel = new Label(post.getContent());
         contentLabel.setStyle("-fx-font-size: 14px; -fx-text-fill: #333; -fx-padding: 5 0 0 0;");
         contentLabel.setWrapText(true);
         card.getChildren().add(contentLabel);
      }

      return card;
   }

   private void showAlert(String title, String message) {
      Alert alert = new Alert(AlertType.ERROR);
      alert.setTitle(title);
      alert.setHeaderText((String)null);
      alert.setContentText(message);
      alert.showAndWait();
   }

   public static void main(String[] args) {
      launch(args);
   }
}
